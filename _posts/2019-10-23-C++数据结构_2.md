---
title: 数据结构_2
categories: 程序设计
date: 2019-10-23 20:53:00
---
# 10月23日代码
   - 实验课内容，p81，定长顺序存储

```cpp
#include <stdio.h>        //头文件 
#include <string.h>

#define MAXSIZE 50       //定义最大容量 
typedef struct{          //串的结构定义 
	char ch[MAXSIZE+1];  //串的数据，包含结束符"\0" 
	int length;          //串的长度 
}SString;                //结构体类型标识符 

int StrAssign(SString &s,char *c){    //串的赋值 
	int i;                            
	if(strlen(c)>=MAXSIZE)            //判断是否超过最大容量 
		return 0;
	else{
		s.length=strlen(c);           //串S长度等于字符串c的长度 
		for(i=0;i<=s.length;i++)      //循环赋值 
			s.ch[i]=c[i];
		return 1;
	}
}

void str_out(SString s){              //串的输出 
	int i;
	for(i=0;i<s.length;i++)           //循环输出 
		printf("%c",s.ch[i]);
	printf("\n"); 
}

void str_insert(SString s,SString t,int pos){//串的插入，在串s的下标为pos的字符前插入串t 
	int i;
	if(pos<0||pos>s.length)                              //插入位置合法性判断 
		printf("错误");
	if(s.length+t.length<=MAXSIZE){                      //插入后的串长<MAXSIZE 
		for(i=s.length+t.length-1;i>=t.length+pos;i--)
			s.ch[i]=s.ch[i-t.length];
		for(i=0;i<t.length;i++)
			s.ch[i+pos]=t.ch[i];
		s.length=s.length+t.length;
	} 
	else if(pos+t.length<=MAXSIZE){             //插入后串长>MAXSIZE且pos+LC<=MAXSIZE 
		for(i=MAXSIZE-1;i>t.length+pos-1;i--)
			s.ch[i]=s.ch[i-t.length];
		for(i=0;i<t.length;i++)
			s.ch[i+pos]=t.ch[i];
		s.length=MAXSIZE;
	}
	else{                                     //插入后串长>MAXSIZE且pos+LC>MAXSIZE 
		for(i=0;i<MAXSIZE-pos;i++){
			s.ch[i+pos]=t.ch[i];
			s.length=MAXSIZE;
		}	
	}
	printf("将t插入到s后："); 
	str_out(s);
}

void str_delete(SString s,int pos,int len){   //串的删除，在串s中删除从下标pos开始的长度为len的字串 
	int i;
	if(pos<0||pos>s.length-len)            //删除合法性判断 
		printf("错误");
	for(i=pos+len;i<s.length;i++)          //将删除部分后面的串向前移动 
		s.ch[i-len]=s.ch[i];
	s.length=s.length-len;                 //串s长度-len 
	printf("删除后的串："); 
	str_out(s);
}

int str_compare(SString s,SString t){//对比串，负数s<t 整数s>t 0则相等 
	int i;	
	for(i=0;i<s.length&&i<t.length;i++)  //依次比较字符的ASCII码。 
		if(s.ch[i]!=t.ch[i]){
			return s.ch[i]-t.ch[i];
		}
	return s.length-t.length;
}

int main(){
	SString s,t; 
	char c1[MAXSIZE]="abcdef",c2[MAXSIZE]="123456";     //串的赋值 
	StrAssign(s,c1);
	StrAssign(t,c2);	
	printf("%d\n",str_compare(s,t));             //对比串 
	str_insert(s,t,3);           //串的插入 
	str_delete(s,3,2);           //串的删除 
	
}

```